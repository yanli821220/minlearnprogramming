---
layout: page
include_in_header: false
permalink: /_booklets/106339798/
---
openvpn - the only access server we need,通用网络环境和访问控制虚拟器
=====

__本文关键字：openvpn 网络环境模拟，openvpn 访问控制，openvpn 虚拟局域网，openvpn vps__

openvpn就是个人打洞器，privte tunnel（在你的机器和openvpn服务器之间做一个点对点 – 连接层，以促成在不同网络之间做一个通道 – 网络层），基本的用途是可用于访问不同网络，比如国际互联网，这点上，它也可用于一些通用环境下的访问点节点互通，甚至，做到APP对APP的通用网络连通控制（任意网络环境虚拟器将之做成节点，任意逻辑的访问控制器，比如在3389之前做一个nat，以使未登记过的IP不能访问3389）。

它甚至还可以维护一个节点管理器实现“多p2p”，将用户整合到你的专有虚拟网中，做自己的客户群入口把非必要用户掩映在一个入口之外（这绝对不像会员系统这属于在访问层就把不要的人给隔离了有绝对的保密性，甚至在公网环境下也不致暴露或可被找寻），比如，你可以把复杂网络环境下的多机集线进来做一个虚拟局域网（nat环境下-比如有路由器，此时出网需要在路由器作映射—此时称节点被路由过）。当然它与其它软件配合可以做流控之类的东西。像官方的一键包。

其实，很多网络操作系统如windows server,linux都有上述支持，只不过openvpn在单一个应用级别集成了这些，以在正确的层面做正确的事情的方式，其实openvpn是工作在实体路由器和实体网络环境之后的，然后它才能在它虚拟路由器级别干它的vpn事情。它并不对这些产生干扰。
openvpn利用的是cs概念，开启s的节点有管理节点的功能，要达到另外一机参与到s机的局域网（更专业讲是VPN环境）环境，往往需要对作为服务节点的路由器设置有控制。
当然这是属于“加速”的范畴，与二机直接点对点如网线直连成VPN网络是不一样的，不过后者往往不可得。所以“加速”往往才是在正确的层面做正确的事情。和直观正确的策略。
即这种方案较传统p2p并不是过度虚拟出来的。是主流的。符合你为了学习找实现范例和过程。openvpn即是这么一个足够好的被研究对象。
总之，openvpn实现了一个“access server”，或称“connect server”，这个可以集成到portalserver.对应于“webserver as page guiserver”。做VPN等等，如果需要VPN翻墙则一个国外带宽的vps承载才有意义。

二机开启点对点局域网
-----

开启需要打开路由器对openvpn的1194端口做局域网映射。基于上它是利用nat的原理 : 对路由器任何一个或一段协议端口的访问（从WAN口进来的访问），都可以重定位到局域网内某一台指定的网络服务器。开启过后，任意二机就有了虚拟局域网环境，在其中你可以共享浏览局域网文件，甚至可以玩对战游戏如war3。将越来越多的C端节点加入到S端节点你就有了多节点局域网环境。

搜索网上openvpn 虚拟局域网有大把教程，就不多讲了。如果你指定你的VPS只有某个局域网才能连接，那么指定openvpn建立的局域网的C端IP即可，这样就达到了IP级的访问控制。当然你需要流控和节点监控之类的逻辑需要借助其它软件打造，比如提取官方包中那个。

配置进阶
-----

以上涉及到的只是表象，上面提到的局域网更适合被称为内部网，因为VPN的隐喻即是建立各种拓扑连通前提下的网络节点访问打通。而，更复杂的情形和其它针对技术在各种情景下都会涉及到，比如静态路由修复，包转发技术啊，这基本是高级网络测试了。

这一切，都是在理清背后那个拓扑结构的前提下，利用虚拟化和网络七层各层次的重定向技术来完成的，可能是软件级的，可能是路由器硬件级的。。而真相只有一个：对背后那个目标网络结构连通的认知，对网络基础知识的认知。

好了。更多的知识需要在其它应用性的贴子中涉及到的。



-----


(此处不设回复，扫码到微信参与留言，或直接点击到原文)

![](/p/106339798/qrcode.png)

<!-- Markdeep: -->
<meta charset="utf-8">
<link rel="stylesheet" href="../../res/aloha.css?">

<script src="../../res/markdeep.min.js" charset="utf-8"></script>




